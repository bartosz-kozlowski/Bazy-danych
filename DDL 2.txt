1.

ALTER TABLE PROJEKTY
ADD (
CONSTRAINT PK_PROJEKTY PRIMARY KEY(ID_PROJEKTU),
CONSTRAINT UK_PROJEKTY UNIQUE(OPIS_PROJEKTU),
CHECK(DATA_ZAKONCZENIA > DATA_ROZPOCZECIA),
CHECK(FUNDUSZ > 0)
)
MODIFY (
OPIS_PROJEKTU NOT NULL
);

select * from projekty

SELECT USER_CONSTRAINTS.CONSTRAINT_NAME, CONSTRAINT_TYPE, SEARCH_CONDITION, COLUMN_NAME
FROM USER_CONSTRAINTS, USER_CONS_COLUMNS
WHERE USER_CONS_COLUMNS.CONSTRAINT_NAME = USER_CONSTRAINTS.CONSTRAINT_NAME AND USER_CONSTRAINTS.TABLE_NAME = 'PROJEKTY'
ORDER BY COLUMN_NAME;

2.

Nie jest to unikalna nazwa w OPIS_PROJEKTU wiec nie damy rade tego zrobic.

INSERT INTO PROJEKTY (OPIS_PROJEKTU, DATA_ROZPOCZECIA, DATA_ZAKONCZENIA, FUNDUSZ)
VALUES ('INDEKSY BITMAPOWE', TO_DATE('12-04-2015', 'DD-MM-YYYY'), TO_DATE('30-09-2016', 'DD-MM-YYYY'), 40000);

3.

CREATE TABLE PRZYDZIALY(
ID_PROJEKTU NUMBER(4) CONSTRAINT FK_PRZYDZIALY_01 REFERENCES PROJEKTY(ID_PROJEKTU) NOT NULL,
NR_PRACOWNIKA NUMBER(6) CONSTRAINT FK_PRZYDZIALY_02 REFERENCES PRACOWNICY(ID_PRAC) NOT NULL ,
OD DATE DEFAULT CURRENT_DATE, DO DATE,
CONSTRAINT CHK_PRZEDZIALY_DATY CHECK (DO > OD),
STAWKA NUMBER(7, 2) CONSTRAINT CHK_PRZYDZIALY_STAWKA CHECK (STAWKA > 0),
CONSTRAINT PK_PRZYDZIALY PRIMARY KEY (ID_PROJEKTU, NR_PRACOWNIKA),
ROLA VARCHAR2(20) CONSTRAINT CHK_PRZYDZIALY_ROLE CHECK (ROLA IN ('KIERUJACY', 'ANALITYK', 'PROGRAMISTA'))
);

4.

INSERT INTO PRZYDZIALY (ID_PROJEKTU, NR_PRACOWNIKA, OD, DO, STAWKA, ROLA) VALUES
((SELECT ID_PROJEKTU FROM PROJEKTY WHERE OPIS_PROJEKTU = 'INDEKSY BITMAPOWE'),
170, DATE '1999-04-10', DATE '1999-05-10', 1000, 'KIERUJĄCY');
INSERT INTO PRZYDZIALY (ID_PROJEKTU, NR_PRACOWNIKA, OD, STAWKA, ROLA) VALUES
((SELECT ID_PROJEKTU FROM PROJEKTY WHERE OPIS_PROJEKTU = 'INDEKSY BITMAPOWE'),
140, DATE '2000-12-01', 1500, 'ANALITYK');
INSERT INTO PRZYDZIALY (ID_PROJEKTU, NR_PRACOWNIKA, OD, STAWKA, ROLA) VALUES
((SELECT ID_PROJEKTU FROM PROJEKTY WHERE OPIS_PROJEKTU = 'SIECI KRĘGOSŁUPOWE'),
140, DATE '2015-09-14', 2500, 'KIERUJACY');
SELECT * FROM PRZYDZIALY;

5. Nie możemy dodać kolumny not null, jeżeli są już jakieś rekordy

ALTER TABLE PRZYDZIALY ADD GODZINY NUMBER(5) CONSTRAINT maxx CHECK(GODZINY < 9999) NOT NULL;

6.

ALTER TABLE PRZYDZIALY ADD GODZINY NUMBER(5);
UPDATE PRZYDZIALY SET GODZINY = 5 WHERE NR_PRACOWNIKA = 170;
ALTER TABLE PRZYDZIALY MODIFY GODZINY NUMBER(5) CONSTRAINT MAKSYMALNA CHECK (GODZINY < 9999) NOT NULL;

7.

ALTER TABLE PROJEKTY DISABLE CONSTRAINT UK_PROJEKTY;

SELECT CONSTRAINT_NAME, STATUS
FROM USER_CONSTRAINTS WHERE CONSTRAINT_NAME = 'UK_PROJEKTY';

8.

INSERT INTO PROJEKTY (OPIS_PROJEKTU, DATA_ROZPOCZECIA, DATA_ZAKONCZENIA, FUNDUSZ)
VALUES ('INDEKSY BITMAPOWE', TO_DATE('12-09-2015', 'DD-MM-YYYY'), TO_DATE('30-09-2016', 'DD-MM-YYYY'), 40000);
Select * from PROJEKTY

9.

Istnieja zduplikowane pola wiec nie mozemy tego zrobic.

ALTER TABLE PROJEKTY ENABLE CONSTRAINT UK_PROJEKTY;

10.

udalo sie.

UPDATE PROJEKTY
SET OPIS_PROJEKTU = 'INNE BITMAPOWE'
WHERE ID_PROJEKTU = 24;

ALTER TABLE PROJEKTY ENABLE CONSTRAINT UK_PROJEKTY;

11. Nie udalo sie bo ktores value jest za duze.

ALTER TABLE PROJEKTY MODIFY OPIS_PROJEKTU VARCHAR2(10);

12. sieci kręgosłupowe są używane w tabeli przydziały

DELETE FROM PROJEKTY
WHERE OPIS_PROJEKTU = 'SIECI KRĘGOSŁUPOWE';

13.

ALTER TABLE PRZYDZIALY DROP CONSTRAINT FK_PRZYDZIALY_01;
ALTER TABLE PRZYDZIALY MODIFY ID_PROJEKTU NUMBER(4) CONSTRAINT FK_PRZYDZIALY_01 REFERENCES PROJEKTY(ID_PROJEKTU) ON DELETE CASCADE;

DELETE
FROM PROJEKTY
WHERE OPIS_PROJEKTU = 'SIECI KRĘGOSŁUPOWE';

SELECT *
FROM PRZYDZIALY;

SELECT *
FROM PROJEKTY;

14.

DROP TABLE PROJEKTY CASCADE CONSTRAINTS;

SELECT CONSTRAINT_NAME, CONSTRAINT_TYPE, SEARCH_CONDITION
FROM USER_CONSTRAINTS;

15.

DROP TABLE PROJEKTY_KOPIA;
DROP TABLE PRZYDZIALY;

SELECT TABLE_NAME
FROM USER_CONSTRAINTS;